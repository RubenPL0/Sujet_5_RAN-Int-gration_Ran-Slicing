# NexSlice - gNB Configuration avec RAN Slicing
# Bas√© sur OAI avec extension slice-aware

Active_gNBs = ( "gNB-NexSlice-Slice-Aware");

gNBs = (
{
    gNB_ID = 0xe00;
    gNB_name = "gNB-NexSlice-Slice-Aware";
    
    # Tracking area code
    tracking_area_code = 1;
    plmn_list = (
      {
        mcc = 001;
        mnc = 01;
        mnc_length = 2;
        
        # Configuration des 3 slices
        snssaiList = (
          {
            sst = 1;
            sd = 0x000001; # eMBB
          },
          {
            sst = 1;
            sd = 0x000002; # URLLC
          },
          {
            sst = 1;
            sd = 0x000003; # mMTC
          }
        );
      }
    );
    
    # N2 interface (gNB <-> AMF)
    amf_ip_address = (
      {
        ipv4 = "192.168.70.132";
        port = 38412;
        active = "yes";
      }
    );
    
    # N3 interface (gNB <-> UPF)
    NETWORK_INTERFACES = {
        GNB_INTERFACE_NAME_FOR_NG_AMF = "eth0";
        GNB_IPV4_ADDRESS_FOR_NG_AMF = "192.168.70.129";
        GNB_INTERFACE_NAME_FOR_NGU = "eth0";
        GNB_IPV4_ADDRESS_FOR_NGU = "192.168.70.129";
        GNB_PORT_FOR_S1U = 2152;
    };
    
    # RAN Slicing Configuration
    ran_slicing = {
        enabled = "yes";
        policy_file = "/opt/oai/etc/rrmPolicy.json";
        
        # Scheduler slice-aware
        scheduler = {
            type = "slice_aware";
            prb_allocation = "static_guaranteed";
            
            # eMBB slice
            slice_0 = {
                sst = 1;
                sd = 0x000001;
                min_prb = 42;
                max_prb = 106;
                weight = 4;
            };
            
            # URLLC slice
            slice_1 = {
                sst = 1;
                sd = 0x000002;
                min_prb = 32;
                max_prb = 85;
                weight = 3;
            };
            
            # mMTC slice
            slice_2 = {
                sst = 1;
                sd = 0x000003;
                min_prb = 11;
                max_prb = 53;
                weight = 1;
            };
        };
    };
    
    # Physical layer parameters
    servingCellConfigCommon = (
    {
        physCellId = 0;
        
        # NR band n78 (3.5 GHz)
        dl_frequencyBand = 78;
        dl_absoluteFrequencyPointA = 640032;
        dl_carrierBandwidth = 106; # PRBs
        dl_subcarrierSpacing = 30; # kHz
        
        ul_frequencyBand = 78;
        ul_absoluteFrequencyPointA = 640032;
        ul_carrierBandwidth = 106; # PRBs
        ul_subcarrierSpacing = 30; # kHz
    });
}
);

# Logging
log_config = {
    global_log_level = "info";
    global_log_verbosity = "medium";
    hw_log_level = "info";
    hw_log_verbosity = "medium";
    phy_log_level = "info";
    phy_log_verbosity = "medium";
    mac_log_level = "info";
    mac_log_verbosity = "high";
    rlc_log_level = "info";
    rlc_log_verbosity = "medium";
    pdcp_log_level = "info";
    pdcp_log_verbosity = "medium";
    rrc_log_level = "info";
    rrc_log_verbosity = "medium";
    ngap_log_level = "info";
    ngap_log_verbosity = "medium";
};
